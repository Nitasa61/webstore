<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>F.A HydroFarm - Sayuran Hidroponik Segar</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- CSS VARIABLES --- */
        :root {
            --primary-green: #2E7D32; 
            --dark-green: #1B5E20; 
            --light-green: #E8F5E9; 
            --accent-gold: #FBC02D;
            --price-orange: #F46A24;
            --segari-green: #40894C;
            --text-dark: #333;
            --text-grey: #555;
            --white: #ffffff;
            --bg-color: #f8f8f8;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; -webkit-tap-highlight-color: transparent; }
        body { background-color: var(--bg-color); color: var(--text-dark); line-height: 1.6; overflow-x: hidden; padding-bottom: 100px; }

        /* HEADER */
        /* --- HEADER (PERBAIKAN LOGO KEJEPIT) --- */
header {
    background-color: var(--white);
    box-shadow: 0 4px 15px rgba(0,0,0,0.05);
    position: sticky;
    top: 0;
    z-index: 1000;
    padding: 10px 5%;
    
    /* MENGGUNAKAN GRID: Kiri(Kosong) - Tengah(Logo) - Kanan(Cart) */
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    align-items: center;
    height: 70px; /* Tinggi header ditetapkan agar lega */
}

.logo-container {
    grid-column: 2; /* Duduk manis di tengah */
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    width: 100%;
    white-space: nowrap; /* Mencegah teks turun baris */
}

.header-icons {
    grid-column: 3; /* Duduk di kanan */
    justify-self: end; /* Rata kanan mentok */
    display: flex;
    align-items: center;
}

.logo-img {
    height: 45px; /* Ukuran pas */
    width: auto;  /* Lebar menyesuaikan agar tidak gepeng */
    object-fit: contain; /* Menjaga proporsi gambar */
    display: block;
}

.brand-name {
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--primary-green);
    line-height: 1;
}

/* Responsif untuk layar laptop */
@media (min-width: 768px) {
    .logo-img { height: 55px; }
    .brand-name { font-size: 1.4rem; }
}

        /* HERO SECTION (BANNER BESAR) */
        .hero { 
            background: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.6)), url('https://images.unsplash.com/photo-1550989460-0adf9ea622e2?q=80&w=1920&auto=format&fit=crop'); 
            background-size: cover; background-position: center; 
            height: 60vh; min-height: 400px; 
            display: flex; flex-direction: column; justify-content: center; align-items: center; 
            text-align: center; color: white; padding: 0 20px; 
        }
        .hero h1 { font-size: 2.5rem; font-weight: 700; margin-bottom: 10px; text-shadow: 0 2px 10px rgba(0,0,0,0.5); }
        .hero p { font-size: 1.1rem; font-weight: 300; margin-bottom: 30px; max-width: 600px; }
        .btn-cta { background-color: var(--accent-gold); color: var(--dark-green); padding: 12px 35px; border: none; border-radius: 50px; font-weight: 600; font-size: 1rem; cursor: pointer; text-decoration: none; transition: transform 0.3s; }
        .btn-cta:hover { transform: translateY(-3px); }

        /* SECTION TENTANG KAMI (TEKS DIKEMBALIKAN) */
        .intro-section { padding: 60px 5%; background-color: var(--white); text-align: center; }
        .intro-container { max-width: 900px; margin: 0 auto; }
        .intro-title { color: var(--primary-green); font-size: 1.8rem; margin-bottom: 30px; position: relative; display: inline-block; }
        .intro-title::after { content: ''; display: block; width: 60px; height: 3px; background: var(--accent-gold); margin: 10px auto 0; }
        
        .intro-text { color: var(--text-grey); font-size: 1rem; margin-bottom: 20px; text-align: justify; text-align-last: center; }
        
        .features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 30px; margin-top: 50px; margin-bottom: 40px; }
        .feature-card { background: var(--light-green); padding: 30px 20px; border-radius: 20px; transition: transform 0.3s; }
        .feature-card:hover { transform: translateY(-5px); background: white; box-shadow: 0 10px 30px rgba(46, 125, 50, 0.1); }
        .feature-icon { font-size: 2.5rem; margin-bottom: 15px; display: block; }
        .feature-title { font-weight: 700; color: var(--dark-green); margin-bottom: 5px; font-size: 1rem; }
        
        .closing-text { font-weight: 600; color: var(--primary-green); font-size: 1.1rem; margin-top: 40px; font-style: italic; }

        /* --- PRODUCT GRID (TAMPILAN BARU) --- */
        .product-section { padding: 50px 5%; background-color: #f8f8f8; }
        .section-header { text-align: center; margin-bottom: 40px; }
        
        .product-grid { 
            display: grid; 
            grid-template-columns: repeat(2, 1fr); /* Default 2 kolom (HP) */
            gap: 15px; 
            max-width: 1000px; 
            margin: 0 auto; 
        }

        @media (min-width: 600px) {
            .product-grid { grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); }
        }

        .product-card {
            background: var(--white);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            display: flex; flex-direction: column;
            border: 2px solid transparent; 
            transition: transform 0.1s;
            cursor: pointer;
            position: relative;
        }

        /* Efek Aktif saat dipilih */
        .product-card.selected {
            border-color: var(--segari-green);
            background-color: #F0FFF4;
        }

        .product-img { width: 100%; height: 150px; object-fit: cover; background-color: #eee; }
        
        .product-info { padding: 12px; display: flex; flex-direction: column; flex-grow: 1; }
        
        .product-name {
            font-size: 0.95rem; font-weight: 600; line-height: 1.3; margin-bottom: 4px;
            display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;
        }

        .product-desc { font-size: 0.75rem; color: #888; margin-bottom: 10px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

        .price-row { margin-top: auto; display: flex; justify-content: space-between; align-items: center; }
        
        .product-price { color: var(--price-orange); font-weight: 700; font-size: 1rem; }

        /* TOMBOL BULAT (+) */
        .add-btn {
            width: 32px; height: 32px;
            background-color: var(--segari-green);
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            color: white; font-weight: bold; font-size: 1.4rem;
            box-shadow: 0 2px 5px rgba(64, 137, 76, 0.3);
            transition: all 0.2s;
        }

        /* Ikon Centang & Plus */
        .check-icon { display: none; width: 18px; height: 18px; fill: white; }
        .plus-icon { display: block; line-height: 0; margin-top: -3px;}

        /* Ubah tombol saat Selected */
        .product-card.selected .add-btn { background-color: var(--primary-green); transform: scale(1.1); }
        .product-card.selected .plus-icon { display: none; }
        .product-card.selected .check-icon { display: block; }

        /* --- FLOATING BAR (BAWAH) --- */
        .floating-bar {
            position: fixed; bottom: 0; left: 0; width: 100%;
            background: white; padding: 15px 20px;
            box-shadow: 0 -4px 20px rgba(0,0,0,0.1);
            z-index: 900;
            display: flex; justify-content: space-between; align-items: center;
            transform: translateY(120%); transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .floating-bar.active { transform: translateY(0); }

        .total-label { font-size: 0.8rem; color: #666; }
        .total-value { font-size: 1.2rem; font-weight: 700; color: var(--text-dark); }
        
        .btn-checkout {
            background-color: var(--segari-green); color: white; border: none; padding: 12px 30px; border-radius: 50px; font-weight: 600; font-size: 1rem; cursor: pointer;
        }

        /* --- SIDEBAR KERANJANG --- */
        .overlay { position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:2000; display:none; }
        .overlay.open { display:block; }
        
        .sidebar {
            position: fixed; top:0; right:-100%; width:100%; max-width:400px; height:100%;
            background: white; z-index:2001; transition: right 0.3s;
            display:flex; flex-direction:column;
        }
        .sidebar.open { right:0; }

        .sidebar-header { padding: 20px; border-bottom: 1px solid #eee; font-weight:bold; font-size:1.1rem; display:flex; justify-content:space-between; align-items:center;}
        .sidebar-body { flex:1; overflow-y:auto; padding:20px; }
        
        .cart-item { display:flex; gap:15px; margin-bottom:20px; padding-bottom:15px; border-bottom:1px solid #f5f5f5; }
        .cart-img { width:60px; height:60px; border-radius:8px; object-fit:cover; }
        .qty-box { display:flex; align-items:center; gap:10px; margin-top:5px; }
        .qty-btn { width:25px; height:25px; border:1px solid #ddd; background:white; border-radius:4px; font-weight:bold; color:var(--primary-green); cursor: pointer; }
        
        .sidebar-footer { padding:20px; border-top:1px solid #eee; }
        .btn-wa { width:100%; padding:14px; background:#25D366; color:white; border:none; border-radius:8px; font-weight:bold; font-size:1rem; cursor:pointer; }
        
        footer { background-color: var(--dark-green); color: white; text-align: center; padding: 30px 20px; margin-top: auto; }
    </style>
</head>
<body>

    <header>
        <div class="logo-container">
            <img src="logo.png" alt="Logo" class="logo-img" onerror="this.style.display='none'">
            <div class="brand-name">F.A HydroFarm</div>
        </div>
    </header>

    <section class="hero">
        <h1>Fresh & Healthy</h1>
        <p>Solusi Sayuran Sehat untuk Keluarga Anda</p>
        <a href="#katalog" class="btn-cta">Belanja Sekarang</a>
    </section>

    <section class="intro-section">
        <div class="intro-container">
            <h2 class="intro-title">Tentang Kami</h2>
            
            <p class="intro-text">
                Kami menyediakan sayuran hidroponik segar, bersih, dan berkualitas yang dipanen langsung dari kebun dan dikirim ke tangan Anda. Ditumbuhkan dengan sistem hidroponik modern tanpa tanah, sayuran kami lebih higienis, renyah, dan kaya nutrisi.
            </p>
            <p class="intro-text">
                Setiap proses penanaman dilakukan dengan kontrol nutrisi dan kualitas yang ketat, tanpa pestisida berbahaya, sehingga aman dikonsumsi oleh anak-anak hingga dewasa. Cocok untuk kebutuhan rumah tangga, usaha kuliner, maupun katering sehat.
            </p>

            <div class="features-grid">
                <div class="feature-card">
                    <span class="feature-icon">ðŸ›’</span>
                    <div class="feature-title">Pesan dengan mudah secara online</div>
                </div>
                <div class="feature-card">
                    <span class="feature-icon">ðŸšš</span>
                    <div class="feature-title">Pengiriman cepat & segar</div>
                </div>
                <div class="feature-card">
                    <span class="feature-icon">ðŸŒ±</span>
                    <div class="feature-title">Panen harian sesuai pesanan</div>
                </div>
            </div>

            <p class="closing-text">
                "Mulai hidup lebih sehat dengan memilih sayuran hidroponik sebagai konsumsi harian Anda. Kesegaran alami, langsung dari kebun ke dapur Anda."
            </p>
        </div>
    </section>

    <div class="product-section" id="katalog">
        <div class="section-header">
            <h2 style="color:var(--primary-green); font-size:1.8rem;">Katalog Sayuran</h2>
            <p style="color:#666;">Klik produk untuk memilih</p>
        </div>
        
        <div class="product-grid" id="product-list">
            <div style="grid-column:1/-1; text-align:center; padding:40px; color:#999;">
                Memuat Produk dari Database...
            </div>
        </div>
    </div>

    <div class="floating-bar" id="float-bar">
        <div>
            <div class="total-label">Total Pembayaran</div>
            <div class="total-value" id="float-total">Rp 0</div>
        </div>
        <button class="btn-checkout" onclick="openSidebar()">
            Lanjut (<span id="float-count">0</span>)
        </button>
    </div>

    <div class="overlay" id="overlay" onclick="closeSidebar()"></div>
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            Rincian Pesanan
            <span onclick="closeSidebar()" style="font-size:1.5rem; cursor:pointer;">&times;</span>
        </div>
        <div class="sidebar-body" id="cart-list">
            </div>
        <div class="sidebar-footer">
            <div style="display:flex; justify-content:space-between; margin-bottom:15px; font-weight:bold;">
                <span>Total Akhir</span>
                <span id="sidebar-total">Rp 0</span>
            </div>
            <button class="btn-wa" onclick="checkoutWA()">
                Pesan via WhatsApp
            </button>
        </div>
    </div>

    <footer>
        <p>&copy; 2026 F.A HydroFarm.</p>
    </footer>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, onSnapshot } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // CONFIG FIREBASE
        const firebaseConfig = {
            apiKey: "AIzaSyDCsEZUpjYRotIMoBJ1sBBpobfZbRlj_nc",
            authDomain: "hydrofarmdb-55ff9.firebaseapp.com",
            projectId: "hydrofarmdb-55ff9",
            storageBucket: "hydrofarmdb-55ff9.firebasestorage.app",
            messagingSenderId: "170371245494",
            appId: "1:170371245494:web:8809ba287e8c95382b4d17",
            measurementId: "G-YL61XTY2MJ"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // STATE
        window.products = [];
        window.cart = [];

        // RENDER PRODUK
        const listEl = document.getElementById('product-list');
        
        onSnapshot(collection(db, "products"), (snapshot) => {
            listEl.innerHTML = "";
            window.products = [];

            if(snapshot.empty) {
                listEl.innerHTML = "<p style='text-align:center; width:100%; grid-column:1/-1;'>Belum ada produk di Admin.</p>";
                return;
            }

            snapshot.forEach(doc => {
                const p = doc.data();
                const id = doc.id;
                window.products.push({id, ...p});

                const price = new Intl.NumberFormat('id-ID').format(p.price);

                const card = document.createElement('div');
                card.className = "product-card";
                card.id = `card-${id}`;
                card.onclick = () => window.toggleItem(id);

                card.innerHTML = `
                    <img src="${p.image}" class="product-img" onerror="this.src='https://via.placeholder.com/150'">
                    <div class="product-info">
                        <div class="product-name">${p.name}</div>
                        <div class="product-desc">${p.desc}</div>
                        <div class="price-row">
                            <div class="product-price">Rp ${price}</div>
                            <div class="add-btn">
                                <span class="plus-icon">+</span>
                                <svg class="check-icon" viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
                            </div>
                        </div>
                    </div>
                `;
                listEl.appendChild(card);
            });
            restoreSelection();
        });

        // LOGIKA SELECT (TOGGLE)
        window.toggleItem = function(id) {
            const idx = window.cart.findIndex(i => i.id === id);
            const card = document.getElementById(`card-${id}`);

            if(idx === -1) {
                // Pilih produk
                const p = window.products.find(x => x.id === id);
                window.cart.push({...p, qty: 1});
                card.classList.add('selected');
            } else {
                // Hapus produk
                window.cart.splice(idx, 1);
                card.classList.remove('selected');
            }
            updateFloat();
        }

        // Restore tampilan seleksi saat refresh real-time
        function restoreSelection() {
            window.cart.forEach(c => {
                const el = document.getElementById(`card-${c.id}`);
                if(el) el.classList.add('selected');
            });
            updateFloat();
        }

        // Update Floating Bar
        function updateFloat() {
            const bar = document.getElementById('float-bar');
            if(window.cart.length > 0) bar.classList.add('active');
            else bar.classList.remove('active');

            let total = 0;
            window.cart.forEach(c => total += c.price * c.qty);
            
            document.getElementById('float-total').innerText = "Rp " + new Intl.NumberFormat('id-ID').format(total);
            document.getElementById('float-count').innerText = window.cart.length;
        }

    </script>

    <script>
        function openSidebar() {
            document.getElementById('overlay').classList.add('open');
            document.getElementById('sidebar').classList.add('open');
            renderSidebar();
        }

        function closeSidebar() {
            document.getElementById('overlay').classList.remove('open');
            document.getElementById('sidebar').classList.remove('open');
        }

        function renderSidebar() {
            const box = document.getElementById('cart-list');
            box.innerHTML = "";
            let total = 0;

            window.cart.forEach((item, i) => {
                total += item.price * item.qty;
                const priceFmt = new Intl.NumberFormat('id-ID').format(item.price);
                
                box.innerHTML += `
                    <div class="cart-item">
                        <img src="${item.image}" class="cart-img">
                        <div style="flex:1;">
                            <div style="font-weight:bold; font-size:0.9rem;">${item.name}</div>
                            <div style="color:#F46A24; font-size:0.9rem;">Rp ${priceFmt}</div>
                            <div class="qty-box">
                                <button class="qty-btn" onclick="changeQty(${i}, -1)">-</button>
                                <span>${item.qty}</span>
                                <button class="qty-btn" onclick="changeQty(${i}, 1)">+</button>
                            </div>
                        </div>
                    </div>
                `;
            });

            document.getElementById('sidebar-total').innerText = "Rp " + new Intl.NumberFormat('id-ID').format(total);
            // Sync float bar text juga
            document.getElementById('float-total').innerText = "Rp " + new Intl.NumberFormat('id-ID').format(total);
        }

        function changeQty(idx, delta) {
            window.cart[idx].qty += delta;
            
            // Jika Qty 0, hapus dari cart
            if(window.cart[idx].qty <= 0) {
                const id = window.cart[idx].id;
                window.cart.splice(idx, 1);
                // Unselect di grid utama
                const card = document.getElementById(`card-${id}`);
                if(card) card.classList.remove('selected');
            }
            
            if(window.cart.length === 0) {
                closeSidebar();
                document.getElementById('float-bar').classList.remove('active');
            } else {
                renderSidebar();
            }
            // Update counter di tombol float
            document.getElementById('float-count').innerText = window.cart.length;
        }

        function checkoutWA() {
            let msg = "Halo F.A HydroFarm, saya mau pesan:\n\n";
            let total = 0;
            window.cart.forEach(c => {
                let sub = c.price * c.qty;
                total += sub;
                msg += `- ${c.name} (${c.qty}x) = Rp ${new Intl.NumberFormat('id-ID').format(sub)}\n`;
            });
            msg += `\n*Total: Rp ${new Intl.NumberFormat('id-ID').format(total)}*`;
            msg += "\n\nMohon info selanjutnya.";
            window.open(`https://wa.me/6282172074755?text=${encodeURIComponent(msg)}`);
        }
    </script>
</body>
</html>
